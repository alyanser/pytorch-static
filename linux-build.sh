#!/usr/bin/bash

export BUILD_SHARED_LIBS=OFF

export CMAKE_BUILD_TYPE=DEBUG
export CMAKE_GENERATOR=Ninja

export USE_GOLD_LINKER=OFF

export BUILD_CAFFE2=OFF
export BUILD_CAFFE2_OPS=OFF
export BUILD_CAFFE2_MOBILE=OFF

export BUILD_BINARY=OFF
export BUILD_CUSTOM_PROTOBUF=OFF

export BUILD_STATIC_RUNTIME_BENCHMARK=OFF
export BUILD_TENSOREXPR_BENCHMARK=OFF
export BUILD_NVFUSER_BENCHMARK=OFF

export BUILD_DOCS=OFF
export BUILD_PYTHON=OFF
export BUILD_TEST=OFF
export BUILD_JNI=OFF
export BUILD_MOBILE_AUTOGRAD=OFF
export BUILD_LITE_INTERPRETER=OFF
export INTERN_BUILD_MOBILE=ON
export USE_BLAS=1
export USE_LAPACK=0

export USE_ASAN=OFF
export USE_CPP_CODE_COVERAGE=OFF
export USE_CUDA=OFF
export USE_ROCM=OFF

export USE_EIGEN_FOR_BLAS=ON
export USE_FAKELOWP=ON
export USE_FBGEMM=OFF
export USE_KINETO=OFF
export USE_FFMPEG=OFF
export USE_GFLAGS=OFF
export USE_GLOG=OFF
export USE_LEVELDB=OFF
export USE_LITE_PROTO=OFF
export USE_LMDB=OFF
export USE_METAL=OFF
export USE_PYTORCH_METAL=OFF
export USE_PYTORCH_METAL_EXPORT=OFF
export USE_MPS=OFF
export USE_FFTW=ON
export USE_MKLDNN=ON
export USE_MKLDNN_ACL=OFF
export USE_MKLDNN_CBLAS=OFF
export USE_UCC=OFF
export USE_ITT=OFF
export USE_NCCL=OFF
export USE_NNPACK=ON
export USE_NUMPY=ON
export USE_OBSERVERS=OFF
export USE_OPENCL=OFF
export USE_OPENCV=OFF
export USE_OPENMP=OFF
export USE_TBB=OFF
export USE_VULKAN=OFF
export USE_PROF=OFF
export USE_QNNPACK=OFF
export USE_PYTORCH_QNNPACK=ON
export USE_XNNPACK=ON
export USE_REDIS=OFF
export USE_ROCKSDB=OFF
export USE_ZMQ=OFF
export USE_DISTRIBUTED=OFF
export USE_DEPLOY=OFF
export USE_COREML_DELEGATE=OFF
export BUILD_LAZY_TS_BACKEND=OFF
export BUILD_PYTORCH_MOBILE_WITH_HOST_TOOLCHAIN=1

/usr/bin/env python pytorch/tools/build_libtorch.py
